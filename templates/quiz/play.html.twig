{% extends 'my_quiz/home.html.twig' %}

{% block body %}
	<div class="test" id="contain">
		<div class="quiz_box">
			<header>
				<div class="title"><h1>{{ quiz.title }}</h1></div>
				<div class="timer float-end">
					<div id="ad" class="time_left_text">Time left</div>
					<div class="timer_sec">15</div>
				</div>
			</header>
			<div class="time_line"></div>
			<hr>
			<section>
				{% for question in quiz.questions %}
					<div id="question_{{loop.index}}">
					{% if question.image %}
						<img src="../../question_images/{{ question.image }}"></img>
					{% endif %}
					<center><h1>{{ question.question }}</h1></center>
					<hr>
					<div class="input-group mb-3">
					<input type="text" class="form-control" placeholder="RÃ©ponse" aria-label="Username">
					</div>
					<h1>{{ question.reponse }}</h1>
					</div>
				{% endfor %}
			</section>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
<script>
	const time_line = document.querySelector(".time_line");
	const timeText = document.querySelector(".timer .time_left_txt");
	const timeCount = document.querySelector(".timer .timer_sec");
	const questions = document.querySelectorAll("div[id^='question_']");
	
	

	function startTimer(time){
			//console.log(document.getElementById("question_"+i));
			//document.getElementById("question_"+i).style.display.add = "none";
			let counter = setInterval(timer, 1000);
			function timer(){
			timeCount.textContent = time; //changing the value of timeCount with time value
			time--; //decrement the time value
			//if(time < 9){ //if timer is less than 9
			//	let addZero = timeCount.textContent; 
			//	timeCount.textContent = "0" + addZero; //add a 0 before time value
			//}
			//console.log(time);
			if(time < 0){ //if timer is less than 0
				clearInterval(counter); //clear counter
				console.log("timeoff");
				//timeText.textContent = "Time Off"; //change the time text to time off
			}
		}
	}
		
	
	function startTimerLine(time){
		counterLine = setInterval(timer, 29);
		function timer(){
			time += 1; //upgrading time value with 1
			time_line.style.width = time*0.185 + "%"; //increasing width of time_line with px by time value
			console.log(time);
			if(time > 549){ //if time value is greater than 549
				clearInterval(counterLine); //clear counterLine
				time_line.style.width = "0%"
				time=0;
			}	
		}
	}

	function both(){
		setInterval(startTimer,16000,15);
		setInterval(startTimerLine,16000,0);
	}
	
	setTimeout(both,2000);

	window.onload = () => {
		//startTimer(15); //calling startTimer function
		//startTimerLine(0); //calling startTimerLine 
	}

</script>
{% endblock %}
